<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>XYZLIX Tizimi</title>
</head>
<body>
    <div id="app">Yuklanmoqda...</div>

    <script type="module">
        // To'g'rilangan payload (Base64)
        const payload = {
            k1: "QUl6YVN5Q08zNDg3b09QdURnS2FRVThrelpKNU5xcV81ZW1QblE=",
            k2: "eHl6bGl4LmZpcmViYXNlYXBwLmNvbQ==",
            k3: "eHl6bGl4",
            k4: "eHl6bGl4LmZpcmViYXNlc3RvcmFnZS5hcHA=",
            k5: "NzEyNDE5NTcwMTE2",
            k6: "MToxNzEyNDE5NTcwMTE2OndlYjoyYjk3MmFkMzE2N2ViZTIyMzRiNDkx",
            k7: "Ry1HRTA0S0tKOVRG"
        };

        const b64ToBytes = (b64) => Uint8Array.from(atob(b64), c => c.charCodeAt(0));
        const verify = async (bytes) => (await crypto.subtle.digest("SHA-256", bytes)).byteLength === 32;

        const decode = async (b64) => {
            const bytes = b64ToBytes(b64);
            if (!(await verify(bytes))) throw new Error("Xavfsizlik xatosi!");
            return new TextDecoder().decode(bytes);
        };

        (async () => {
            try {
                const config = {
                    apiKey: await decode(payload.k1),
                    authDomain: await decode(payload.k2),
                    projectId: await decode(payload.k3),
                    storageBucket: await decode(payload.k4),
                    messagingSenderId: await decode(payload.k5),
                    appId: await decode(payload.k6),
                    measurementId: await decode(payload.k7)
                };

                const { initializeApp } = await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js");
                initializeApp(config);
                
                document.getElementById('app').innerHTML = "<h1>Firebase xavfsiz ulandi! ✅</h1>";
            } catch (e) {
                document.getElementById('app').innerHTML = "<h1>Xatolik yuz berdi ❌</h1>";
                console.error(e);
            }
        })();
    </script>
</body>
</html>
