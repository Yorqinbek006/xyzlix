// Kirish tugmasi bosilganda ishlaydigan mantiq
document.getElementById('loginBtn').onclick = async () => {
    const user = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value;
    const status = document.getElementById('status');
    const btn = document.getElementById('loginBtn');

    if (!user || !pass) {
        status.innerText = "Ma'lumotlarni kiriting! ⚠️";
        return;
    }

    btn.disabled = true;
    status.innerText = "Tekshirilmoqda... ⏳";

    try {
        // Loginni email formatiga o'tkazish
        const email = user.includes('@') ? user : `${user}@xyzlix.com`;
        
        // Firebase orqali kirish
        await signInWithEmailAndPassword(auth, email, pass);
        
        status.innerText = "Muvaffaqiyatli! Sahifa ochilmoqda... ✅";
        status.style.color = "#4ade80";

        // Ikkinchi oynani ochishga majburlash
        // GitHub Pages uchun "./home.html" shaklida yozish xavfsizroq
        setTimeout(() => {
            window.location.assign("./home.html");
        }, 500);

    } catch (e) {
        btn.disabled = false;
        console.error("Xato:", e.code);
        status.innerText = "Xato: Login yoki parol noto'g'ri ❌";
        status.style.color = "#f87171";
    }
};
